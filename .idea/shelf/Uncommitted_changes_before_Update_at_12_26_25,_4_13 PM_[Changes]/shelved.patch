Index: Frontend/src/pages/Penalty.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst Penality = () => {\n  const [records, setRecords] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const token = localStorage.getItem(\"token\");\n  const role = localStorage.getItem(\"role\"); \n  const headers = { Authorization: `Bearer ${token}` };\n\n  const LATE_FINE_PER_DAY = 5;\n  const BROKEN_PAGE_FINE = 2;\n  const LOST_BOOK_FINE = 50;\n\n  // Fetch borrow records\n  useEffect(() => {\n    const fetchRecords = async () => {\n      setLoading(true);\n      try {\n        const res = await axios.get(\"https://localhost:8081/api/borrow/all\", {\n          headers,\n        });\n        setRecords(res.data);\n      } catch (err) {\n        console.error(err);\n        alert(\"Failed to fetch borrow records\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchRecords();\n  }, []);\n\n  // Calculate penalties\n  const calculatePenalty = (r) => {\n    const today = new Date();\n    const dueDate = new Date(r.dueDate);\n    const overdue = dueDate < today;\n\n    const latePenalty = overdue\n      ? Math.ceil((today - dueDate) / (1000 * 60 * 60 * 24)) * LATE_FINE_PER_DAY\n      : 0;\n    const brokenPenalty = (r.brokenPages || 0) * BROKEN_PAGE_FINE;\n    const lostPenalty = r.lost ? LOST_BOOK_FINE : 0;\n\n    return {\n      latePenalty,\n      brokenPenalty,\n      lostPenalty,\n      total: latePenalty + brokenPenalty + lostPenalty,\n      overdue,\n    };\n  };\n\n  // Update borrow record fields\n  const handleFieldChange = async (id, field, value) => {\n    try {\n      setRecords(\n        records.map((r) => (r.id === id ? { ...r, [field]: value } : r))\n      );\n\n      // Send update to backend\n      await axios.put(\n        `https://localhost:8081/api/borrow/update/${id}`,\n        { [field]: value },\n        { headers }\n      );\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to update record\");\n    }\n  };\n\n  // Helper for consistent select styling\n  const selectClass =\n    \"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5 shadow-sm transition-all\";\n\n  return (\n    <div className=\"p-6 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto bg-white shadow-xl rounded-2xl overflow-hidden\">\n        <div className=\"p-6 border-b border-gray-100 bg-white\">\n          <h2 className=\"text-3xl font-extrabold text-gray-800 tracking-tight\">\n            Borrowed Books & <span className=\"text-blue-600\">Penalties</span>\n          </h2>\n          <p className=\"text-gray-500 mt-1\">\n            Review student records, track damages, and manage fine settlements.\n          </p>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"flex justify-center items-center py-20\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto rounded-xl border border-gray-200\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Customer\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Book\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Borrow Date\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Due Date\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Broken Pages\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Lost\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Overdue\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center\">\n                      Late ($)\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center\">\n                      Broken ($)\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center\">\n                      Lost ($)\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center\">\n                      Total ($)\n                    </th>\n                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider\">\n                      Status\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-100\">\n                  {records.map((r) => {\n                    const {\n                      latePenalty,\n                      brokenPenalty,\n                      lostPenalty,\n                      total,\n                      overdue,\n                    } = calculatePenalty(r);\n                    return (\n                      <tr\n                        key={r.id}\n                        className=\"hover:bg-blue-50/30 transition-colors\"\n                      >\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900\">\n                          {r.customer?.name}\n                        </td>\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-600 italic\">\n                          {r.book?.title}\n                        </td>\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                          {new Date(r.borrowDate).toLocaleDateString()}\n                        </td>\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                          {new Date(r.dueDate).toLocaleDateString()}\n                        </td>\n\n                        {/* Broken Pages */}\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm\">\n                          {role === \"ADMIN\" || role === \"LIBRARIAN\" ? (\n                            <select\n                              value={r.brokenPages > 0 ? \"yes\" : \"no\"}\n                              onChange={(e) =>\n                                handleFieldChange(\n                                  r.id,\n                                  \"brokenPages\",\n                                  e.target.value === \"yes\" ? 1 : 0\n                                )\n                              }\n                              className={selectClass}\n                            >\n                              <option value=\"no\">No</option>\n                              <option value=\"yes\">Yes</option>\n                            </select>\n                          ) : (\n                            <span\n                              className={`px-2 py-1 rounded-md font-bold ${\n                                r.brokenPages > 0\n                                  ? \"text-red-600 bg-red-50\"\n                                  : \"text-gray-400\"\n                              }`}\n                            >\n                              {r.brokenPages > 0 ? \"Yes\" : \"No\"}\n                            </span>\n                          )}\n                        </td>\n\n                        {/* Lost */}\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm\">\n                          {role === \"ADMIN\" || role === \"LIBRARIAN\" ? (\n                            <select\n                              value={r.lost ? \"yes\" : \"no\"}\n                              onChange={(e) =>\n                                handleFieldChange(\n                                  r.id,\n                                  \"lost\",\n                                  e.target.value === \"yes\"\n                                )\n                              }\n                              className={selectClass}\n                            >\n                              <option value=\"no\">No</option>\n                              <option value=\"yes\">Yes</option>\n                            </select>\n                          ) : (\n                            <span\n                              className={`px-2 py-1 rounded-md font-bold ${\n                                r.lost\n                                  ? \"text-red-600 bg-red-50\"\n                                  : \"text-gray-400\"\n                              }`}\n                            >\n                              {r.lost ? \"Yes\" : \"No\"}\n                            </span>\n                          )}\n                        </td>\n\n                        {/* Overdue */}\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm\">\n                          {role === \"ADMIN\" || role === \"LIBRARIAN\" ? (\n                            <select\n                              value={overdue ? \"yes\" : \"no\"}\n                              onChange={(e) =>\n                                handleFieldChange(\n                                  r.id,\n                                  \"overdueFlag\",\n                                  e.target.value === \"yes\"\n                                )\n                              }\n                              className={selectClass}\n                            >\n                              <option value=\"no\">No</option>\n                              <option value=\"yes\">Yes</option>\n                            </select>\n                          ) : (\n                            <span\n                              className={`px-2 py-1 rounded-md font-bold ${\n                                overdue\n                                  ? \"text-red-600 bg-red-50\"\n                                  : \"text-green-600 bg-green-50\"\n                              }`}\n                            >\n                              {overdue ? \"Yes\" : \"No\"}\n                            </span>\n                          )}\n                        </td>\n\n                        {/* Penalties */}\n                        <td className=\"px-4 py-4 text-center text-sm font-medium text-gray-700\">\n                          {latePenalty}\n                        </td>\n                        <td className=\"px-4 py-4 text-center text-sm font-medium text-gray-700\">\n                          {brokenPenalty}\n                        </td>\n                        <td className=\"px-4 py-4 text-center text-sm font-medium text-gray-700\">\n                          {lostPenalty}\n                        </td>\n                        <td className=\"px-4 py-4 text-center text-sm font-extrabold text-blue-700 bg-blue-50/50\">\n                          {total}\n                        </td>\n\n                        {/* Status */}\n                        <td className=\"px-4 py-4 whitespace-nowrap text-sm\">\n                          {role === \"ADMIN\" || role === \"LIBRARIAN\" ? (\n                            <select\n                              value={r.status ? \"true\" : \"false\"}\n                              onChange={(e) =>\n                                handleFieldChange(\n                                  r.id,\n                                  \"status\",\n                                  e.target.value === \"true\"\n                                )\n                              }\n                              className={`${selectClass} ${\n                                r.status\n                                  ? \"text-green-700 border-green-200 bg-green-50\"\n                                  : \"text-amber-700 border-amber-200 bg-amber-50\"\n                              }`}\n                            >\n                              <option value=\"false\">Pending</option>\n                              <option value=\"true\">Resolved</option>\n                            </select>\n                          ) : (\n                            <span\n                              className={`px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${\n                                r.status\n                                  ? \"bg-green-100 text-green-800\"\n                                  : \"bg-amber-100 text-amber-800\"\n                              }`}\n                            >\n                              {r.status ? \"Resolved\" : \"Pending\"}\n                            </span>\n                          )}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Penality;\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Frontend/src/pages/Penalty.jsx b/Frontend/src/pages/Penalty.jsx
--- a/Frontend/src/pages/Penalty.jsx	(revision 30f2fb1e15e987cf7c161f7a225acfd7e9c8f7bb)
+++ b/Frontend/src/pages/Penalty.jsx	(date 1766699245686)
@@ -6,7 +6,12 @@
   const [loading, setLoading] = useState(false);
 
   const token = localStorage.getItem("token");
-  const role = localStorage.getItem("role"); 
+  
+  // --- FIXED ROLE LOGIC ---
+  const rawRole = localStorage.getItem("role") || "USER";
+  const role = rawRole.replace("ROLE_", "").toUpperCase(); 
+  // ------------------------
+
   const headers = { Authorization: `Bearer ${token}` };
 
   const LATE_FINE_PER_DAY = 5;
@@ -36,12 +41,12 @@
   // Calculate penalties
   const calculatePenalty = (r) => {
     const today = new Date();
-    const dueDate = new Date(r.dueDate);
-    const overdue = dueDate < today;
+    const dueDate = new Date(r.returnDate); // Using returnDate for calculation
+    const overdue = r.overdue !== undefined ? r.overdue : dueDate < today;
 
     const latePenalty = overdue
-      ? Math.ceil((today - dueDate) / (1000 * 60 * 60 * 24)) * LATE_FINE_PER_DAY
-      : 0;
+        ? Math.ceil((today - dueDate) / (1000 * 60 * 60 * 24)) * LATE_FINE_PER_DAY
+        : 0;
     const brokenPenalty = (r.brokenPages || 0) * BROKEN_PAGE_FINE;
     const lostPenalty = r.lost ? LOST_BOOK_FINE : 0;
 
@@ -58,14 +63,14 @@
   const handleFieldChange = async (id, field, value) => {
     try {
       setRecords(
-        records.map((r) => (r.id === id ? { ...r, [field]: value } : r))
+          records.map((r) => (r.id === id ? { ...r, [field]: value } : r))
       );
 
       // Send update to backend
       await axios.put(
-        `https://localhost:8081/api/borrow/update/${id}`,
-        { [field]: value },
-        { headers }
+          `https://localhost:8081/api/borrow/update/${id}`,
+          { [field]: value },
+          { headers }
       );
     } catch (err) {
       console.error(err);
@@ -75,243 +80,247 @@
 
   // Helper for consistent select styling
   const selectClass =
-    "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5 shadow-sm transition-all";
+      "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5 shadow-sm transition-all";
 
   return (
-    <div className="p-6 bg-gray-50 min-h-screen">
-      <div className="max-w-7xl mx-auto bg-white shadow-xl rounded-2xl overflow-hidden">
-        <div className="p-6 border-b border-gray-100 bg-white">
-          <h2 className="text-3xl font-extrabold text-gray-800 tracking-tight">
-            Borrowed Books & <span className="text-blue-600">Penalties</span>
-          </h2>
-          <p className="text-gray-500 mt-1">
-            Review student records, track damages, and manage fine settlements.
-          </p>
-        </div>
+      <div className="p-6 bg-gray-50 min-h-screen">
+        <div className="max-w-7xl mx-auto bg-white shadow-xl rounded-2xl overflow-hidden">
+          <div className="p-6 border-b border-gray-100 bg-white">
+            <h2 className="text-3xl font-extrabold text-gray-800 tracking-tight">
+              Borrowed Books & <span className="text-blue-600">Penalties</span>
+            </h2>
+            <p className="text-gray-500 mt-1">
+              Review student records, track damages, and manage fine settlements.
+            </p>
+          </div>
 
-        <div className="p-6">
-          {loading ? (
-            <div className="flex justify-center items-center py-20">
-              <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
-            </div>
-          ) : (
-            <div className="overflow-x-auto rounded-xl border border-gray-200">
-              <table className="min-w-full divide-y divide-gray-200">
-                <thead className="bg-gray-50">
-                  <tr>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Customer
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Book
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Borrow Date
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Due Date
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Broken Pages
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Lost
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Overdue
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
-                      Late ($)
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
-                      Broken ($)
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
-                      Lost ($)
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
-                      Total ($)
-                    </th>
-                    <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
-                      Status
-                    </th>
-                  </tr>
-                </thead>
-                <tbody className="bg-white divide-y divide-gray-100">
-                  {records.map((r) => {
-                    const {
-                      latePenalty,
-                      brokenPenalty,
-                      lostPenalty,
-                      total,
-                      overdue,
-                    } = calculatePenalty(r);
-                    return (
-                      <tr
-                        key={r.id}
-                        className="hover:bg-blue-50/30 transition-colors"
-                      >
-                        <td className="px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900">
-                          {r.customer?.name}
-                        </td>
-                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-600 italic">
-                          {r.book?.title}
-                        </td>
-                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
-                          {new Date(r.borrowDate).toLocaleDateString()}
-                        </td>
-                        <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
-                          {new Date(r.dueDate).toLocaleDateString()}
-                        </td>
+          <div className="p-6">
+            {loading ? (
+                <div className="flex justify-center items-center py-20">
+                  <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
+                </div>
+            ) : (
+                <div className="overflow-x-auto rounded-xl border border-gray-200">
+                  <table className="min-w-full divide-y divide-gray-200">
+                    <thead className="bg-gray-50">
+                    <tr>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Customer
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Book
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Borrow Date
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Due Date
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Broken Pages
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Lost
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Overdue
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
+                        Late ($)
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
+                        Broken ($)
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
+                        Lost ($)
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider text-center">
+                        Total ($)
+                      </th>
+                      <th className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
+                        Status
+                      </th>
+                    </tr>
+                    </thead>
+                    <tbody className="bg-white divide-y divide-gray-100">
+                    {records.map((r) => {
+                      const {
+                        latePenalty,
+                        brokenPenalty,
+                        lostPenalty,
+                        total,
+                        overdue,
+                      } = calculatePenalty(r);
+                      return (
+                          <tr
+                              key={r.id}
+                              className="hover:bg-blue-50/30 transition-colors"
+                          >
+                            <td className="px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900">
+                              {r.customer?.name}
+                            </td>
+                            <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-600 italic">
+                              {r.book?.title}
+                            </td>
+                            <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
+                              {new Date(r.borrowDate).toLocaleDateString()}
+                            </td>
+                            <td className="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
+                              {new Date(r.returnDate).toLocaleDateString()}
+                            </td>
 
-                        {/* Broken Pages */}
-                        <td className="px-4 py-4 whitespace-nowrap text-sm">
-                          {role === "ADMIN" || role === "LIBRARIAN" ? (
-                            <select
-                              value={r.brokenPages > 0 ? "yes" : "no"}
-                              onChange={(e) =>
-                                handleFieldChange(
-                                  r.id,
-                                  "brokenPages",
-                                  e.target.value === "yes" ? 1 : 0
-                                )
-                              }
-                              className={selectClass}
-                            >
-                              <option value="no">No</option>
-                              <option value="yes">Yes</option>
-                            </select>
-                          ) : (
-                            <span
-                              className={`px-2 py-1 rounded-md font-bold ${
-                                r.brokenPages > 0
-                                  ? "text-red-600 bg-red-50"
-                                  : "text-gray-400"
-                              }`}
-                            >
+                            {/* Broken Pages */}
+                            <td className="px-4 py-4 whitespace-nowrap text-sm">
+                              {role === "ADMIN" || role === "LIBRARIAN" ? (
+                                  <select
+                                      value={r.brokenPages > 0 ? "yes" : "no"}
+                                      onChange={(e) =>
+                                          handleFieldChange(
+                                              r.id,
+                                              "brokenPages",
+                                              e.target.value === "yes" ? 1 : 0
+                                          )
+                                      }
+                                      className={selectClass}
+                                  >
+                                    <option value="no">No</option>
+                                    <option value="yes">Yes</option>
+                                  </select>
+                              ) : (
+                                  <span
+                                      className={`px-2 py-1 rounded-md font-bold ${
+                                          r.brokenPages > 0
+                                              ? "text-red-600 bg-red-50"
+                                              : "text-gray-400"
+                                      }`}
+                                  >
                               {r.brokenPages > 0 ? "Yes" : "No"}
                             </span>
-                          )}
-                        </td>
+                              )}
+                            </td>
 
-                        {/* Lost */}
-                        <td className="px-4 py-4 whitespace-nowrap text-sm">
-                          {role === "ADMIN" || role === "LIBRARIAN" ? (
-                            <select
-                              value={r.lost ? "yes" : "no"}
-                              onChange={(e) =>
-                                handleFieldChange(
-                                  r.id,
-                                  "lost",
-                                  e.target.value === "yes"
-                                )
-                              }
-                              className={selectClass}
-                            >
-                              <option value="no">No</option>
-                              <option value="yes">Yes</option>
-                            </select>
-                          ) : (
-                            <span
-                              className={`px-2 py-1 rounded-md font-bold ${
-                                r.lost
-                                  ? "text-red-600 bg-red-50"
-                                  : "text-gray-400"
-                              }`}
-                            >
+                            {/* Lost */}
+                            <td className="px-4 py-4 whitespace-nowrap text-sm">
+                              {role === "ADMIN" || role === "LIBRARIAN" ? (
+                                  <select
+                                      value={r.lost ? "yes" : "no"}
+                                      onChange={(e) =>
+                                          handleFieldChange(
+                                              r.id,
+                                              "lost",
+                                              e.target.value === "yes"
+                                          )
+                                      }
+                                      className={selectClass}
+                                  >
+                                    <option value="no">No</option>
+                                    <option value="yes">Yes</option>
+                                  </select>
+                              ) : (
+                                  <span
+                                      className={`px-2 py-1 rounded-md font-bold ${
+                                          r.lost
+                                              ? "text-red-600 bg-red-50"
+                                              : "text-gray-400"
+                                      }`}
+                                  >
                               {r.lost ? "Yes" : "No"}
                             </span>
-                          )}
-                        </td>
+                              )}
+                            </td>
 
-                        {/* Overdue */}
-                        <td className="px-4 py-4 whitespace-nowrap text-sm">
-                          {role === "ADMIN" || role === "LIBRARIAN" ? (
-                            <select
-                              value={overdue ? "yes" : "no"}
-                              onChange={(e) =>
-                                handleFieldChange(
-                                  r.id,
-                                  "overdueFlag",
-                                  e.target.value === "yes"
-                                )
-                              }
-                              className={selectClass}
-                            >
-                              <option value="no">No</option>
-                              <option value="yes">Yes</option>
-                            </select>
-                          ) : (
-                            <span
-                              className={`px-2 py-1 rounded-md font-bold ${
-                                overdue
-                                  ? "text-red-600 bg-red-50"
-                                  : "text-green-600 bg-green-50"
-                              }`}
-                            >
+                            {/* Overdue WITH DROPDOWN */}
+                            <td className="px-4 py-4 whitespace-nowrap text-sm">
+                              {role === "ADMIN" || role === "LIBRARIAN" ? (
+                                  <select
+                                      value={overdue ? "yes" : "no"}
+                                      onChange={(e) =>
+                                          handleFieldChange(
+                                              r.id,
+                                              "overdue",
+                                              e.target.value === "yes"
+                                          )
+                                      }
+                                      className={`${selectClass} ${
+                                          overdue
+                                              ? "text-red-700 border-red-200 bg-red-50"
+                                              : "text-green-700 border-green-200 bg-green-50"
+                                      }`}
+                                  >
+                                    <option value="no">No</option>
+                                    <option value="yes">Yes</option>
+                                  </select>
+                              ) : (
+                                  <span
+                                      className={`px-2 py-1 rounded-md font-bold ${
+                                          overdue
+                                              ? "text-red-600 bg-red-50"
+                                              : "text-green-600 bg-green-50"
+                                      }`}
+                                  >
                               {overdue ? "Yes" : "No"}
                             </span>
-                          )}
-                        </td>
+                              )}
+                            </td>
 
-                        {/* Penalties */}
-                        <td className="px-4 py-4 text-center text-sm font-medium text-gray-700">
-                          {latePenalty}
-                        </td>
-                        <td className="px-4 py-4 text-center text-sm font-medium text-gray-700">
-                          {brokenPenalty}
-                        </td>
-                        <td className="px-4 py-4 text-center text-sm font-medium text-gray-700">
-                          {lostPenalty}
-                        </td>
-                        <td className="px-4 py-4 text-center text-sm font-extrabold text-blue-700 bg-blue-50/50">
-                          {total}
-                        </td>
+                            {/* Penalties */}
+                            <td className="px-4 py-4 text-center text-sm font-medium text-gray-700">
+                              {latePenalty}
+                            </td>
+                            <td className="px-4 py-4 text-center text-sm font-medium text-gray-700">
+                              {brokenPenalty}
+                            </td>
+                            <td className="px-4 py-4 text-center text-sm font-medium text-gray-700">
+                              {lostPenalty}
+                            </td>
+                            <td className="px-4 py-4 text-center text-sm font-extrabold text-blue-700 bg-blue-50/50">
+                              {total}
+                            </td>
 
-                        {/* Status */}
-                        <td className="px-4 py-4 whitespace-nowrap text-sm">
-                          {role === "ADMIN" || role === "LIBRARIAN" ? (
-                            <select
-                              value={r.status ? "true" : "false"}
-                              onChange={(e) =>
-                                handleFieldChange(
-                                  r.id,
-                                  "status",
-                                  e.target.value === "true"
-                                )
-                              }
-                              className={`${selectClass} ${
-                                r.status
-                                  ? "text-green-700 border-green-200 bg-green-50"
-                                  : "text-amber-700 border-amber-200 bg-amber-50"
-                              }`}
-                            >
-                              <option value="false">Pending</option>
-                              <option value="true">Resolved</option>
-                            </select>
-                          ) : (
-                            <span
-                              className={`px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${
-                                r.status
-                                  ? "bg-green-100 text-green-800"
-                                  : "bg-amber-100 text-amber-800"
-                              }`}
-                            >
+                            {/* Status */}
+                            <td className="px-4 py-4 whitespace-nowrap text-sm">
+                              {role === "ADMIN" || role === "LIBRARIAN" ? (
+                                  <select
+                                      value={r.status ? "true" : "false"}
+                                      onChange={(e) =>
+                                          handleFieldChange(
+                                              r.id,
+                                              "status",
+                                              e.target.value === "true"
+                                          )
+                                      }
+                                      className={`${selectClass} ${
+                                          r.status
+                                              ? "text-green-700 border-green-200 bg-green-50"
+                                              : "text-amber-700 border-amber-200 bg-amber-50"
+                                      }`}
+                                  >
+                                    <option value="false">Pending</option>
+                                    <option value="true">Resolved</option>
+                                  </select>
+                              ) : (
+                                  <span
+                                      className={`px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${
+                                          r.status
+                                              ? "bg-green-100 text-green-800"
+                                              : "bg-amber-100 text-amber-800"
+                                      }`}
+                                  >
                               {r.status ? "Resolved" : "Pending"}
                             </span>
-                          )}
-                        </td>
-                      </tr>
-                    );
-                  })}
-                </tbody>
-              </table>
-            </div>
-          )}
-        </div>
-      </div>
-    </div>
+                              )}
+                            </td>
+                          </tr>
+                      );
+                    })}
+                    </tbody>
+                  </table>
+                </div>
+            )}
+          </div>
+        </div>
+      </div>
   );
 };
 
-export default Penality;
+export default Penality;
\ No newline at end of file
